<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="recipes.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
</head>
<style>

body, html {
  height: 100%;
  margin: 0;
  background-color: #fdfbf4;
  padding: 0;
  box-sizing: border-box;
}
.banner {
    /* The image used */
    background-image: 
    url(https://cdn.pixabay.com/photo/2017/02/15/10/39/salad-2068220_1280.jpg);
    
    height: 50%;

    /* Position and center the image to scale nicely on all screens */
    background-position: center;
    background-repeat: no-repeat;
    background-size: cover;
    position: relative;
    }

/* Place text in the middle of the image */
.banner-text {
  text-align: center;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  color: white;
}

.sidebar {
    margin-left: 70px;
    width: 200px;
    float: left;
}

.body_container {
    margin-left: 220px;
}

.text_container{
    text-align: center;
   
}

.card-container {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    align-items: center;
    margin-top: 10px; 
       
}

.card {
  width: 18em;
  margin: 10px; /* Adjust as needed */
}

.btn-custom {
    background-color: #cc7e18; /* Set your desired background color */
    color: #ffffff; /* Set your desired text color */
    /* Add any other desired styles */
}


</style>

<body>

    <!-- banner -->

    <div class="banner">
        <div class = "banner-text">
          <h1>Welcome to the site!</h1>
          <h5>Don't know what to eat today? You come to the right place!</h5>

        </div>  
    </div>

    <br>

    <div class = "sidebar">

        <div class = "sidebar_menu">

            <h2> Filter: </h2>
        
            <div class="ingredient_list">
                <br>
                <h5> Ingredients:</h5>

                <div class="checkbox">
                    <label><input type="checkbox" rel="Rice" onchange="change();"/> Rice</label>
                </div>
                
                <div class="checkbox">
                    <label><input type="checkbox" rel="Coconut Milk" onchange="change();"/> Coconut Milk</label>
                </div>

                <div class="checkbox">
                    <label><input type="checkbox" rel="Chicken" onchange="change();"/> Chicken</label>
                </div>
        
            </div>

            <br><br>

            <div class="cuisine_filter">
                
                <h5> Cuisines:</h5>

                <div class="btn-group">
                        <button type="button" class="btn btn-custom btn-sm dropdown-toggle" data-bs-toggle="dropdown">
                    Different Cuisines
                    </button>
                    <div class="dropdown-menu"  id="cuisineDropdown">
                        <a class="dropdown-item" onclick="change('Malaysian');">Malaysian</a>
                        <a class="dropdown-item" onclick="change('Western');">Western</a>
                        <a class="dropdown-item" onclick="change('Indian');">Indian</a>
                    </div>
                   
                </div>

            </div>


            <br><br>
            <button class="button" onclick="showAllRecipe()">Show All Recipes!</button>


        </div>

       
    </div>

    <div class="body_container">

        <div class="text_container">
                
            <h2>Results</h2>

        </div>
            
            <div class="card-container" id="recipeResult">
            <!-- Recipe titles will be dynamically generated here -->   

            

            </div>

        </div>       
    </div>
    
</body>

<script>


    // Function to filter recipes based on ingredient filters
    function filterRecipes(ingredients, cuisine) {
      if (ingredients.length === 0 && !cuisine) {
        return ; // Show no recipes unless ingredients are selected (first view)
      }
      
      // Filter the recipes based on selected ingredients
      return recipes.filter(recipe => {
        // Check if the recipe's ingredients include all selected ingredients
        const ingredientsMatch = ingredients.every(ingredient => recipe.ingredients.includes(ingredient));

        // Check if the recipe's cuisine matches the selected cuisine
        const cuisineMatch = !cuisine || recipe.cuisine === cuisine;

        // Return true if both ingredients and cuisine match
        return ingredientsMatch && cuisineMatch;
      });
    }
    
    
    function change(){
        // Declare variables
        var input = document.querySelectorAll('.ingredient_list input[type=checkbox]'); 
        const cuisineInput = document.getElementById('cuisineDropdown');
      
        const recipeResult = document.getElementById('recipeResult');
        recipeResult.innerHTML = '';
    
        //Selected ingredients are now stored in the selectedIngredients array
        var selectedIngredients = Array.from(input)
        .filter(checkbox => checkbox.checked)
        .map(checkbox => checkbox.getAttribute('rel'));



        var selectedCuisine = event.target.textContent.trim();
        console.log(selectedCuisine);

        var filteredRecipes = filterRecipes(selectedIngredients, selectedCuisine);
    
        //Filltered recipes are then iterated over to append to recipeResult container 
        
        if (filteredRecipes){
            filteredRecipes.forEach(recipe => {
                // For each recipe, create a div card
                const card = document.createElement('div');
                card.className = 'card';
                card.style.width = '18rem';

                const cardBody = document.createElement('div');
                cardBody.className = 'card-body';

                const cardTitle = document.createElement('h5');
                cardTitle.className = 'card-title';
                cardTitle.textContent = recipe.title;

                const cardText = document.createElement('p');
                cardText.className = 'card-text';
                cardText.textContent = recipe.description;

                cardBody.appendChild(cardTitle);
                cardBody.appendChild(cardText);
                card.appendChild(cardBody);
                recipeResult.appendChild(card);

            });
        }
    
    
        
    }
    
    function showAllRecipe(ingredients){
        
        //Declare Variables
        const recipeResult = document.getElementById('recipeResult');
        recipeResult.innerHTML = '';
    
        recipes.forEach(recipe => {
            const card = document.createElement('div');
            card.className = 'card';
            card.style.width = '18rem';

            const cardBody = document.createElement('div');
            cardBody.className = 'card-body';

            const cardTitle = document.createElement('h5');
            cardTitle.className = 'card-title';
            cardTitle.textContent = recipe.title;

            const cardText = document.createElement('p');
            cardText.className = 'card-text';
            cardText.textContent = recipe.description;

            cardBody.appendChild(cardTitle);
            cardBody.appendChild(cardText);
            card.appendChild(cardBody);
            recipeResult.appendChild(card);

        });
    
    };
    
    
    </script>
    
</html>