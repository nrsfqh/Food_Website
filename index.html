<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="recipes.js"></script>
</head>
<style>

body, html {
  height: 100%;
  margin: 0;
  background-color: #fdfbf4;
  padding: 0;
  box-sizing: border-box;
}
.banner {
    /* The image used */
    background-image: 
    url(https://cdn.pixabay.com/photo/2017/02/15/10/39/salad-2068220_1280.jpg);
    
    height: 50%;

    /* Position and center the image to scale nicely on all screens */
    background-position: center;
    background-repeat: no-repeat;
    background-size: cover;
    position: relative;
    }

/* Place text in the middle of the image */
.banner-text {
  text-align: center;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  color: white;
}

.sidebar {
    margin-left: 70px;
    width: 200px;
    float: left;
}

.body_container {
    margin-left: 220px;
}

.text_container{
    text-align: center;
   
}

.result {
        display: flex;
        flex-direction: column;
        margin-top: 10px; /* Adjust as needed */
}

.result p {
        font-size: x-large;
}



</style>

<body>

    <!-- banner -->

    <div class="banner">
        <div class = "banner-text">
          <h1>Welcome to the site!</h1>
          <h5>Don't know what to eat today? You come to the right place!</h5>

        </div>  
    </div>



    <div class = "sidebar">

        <div class = "sidebar_menu">

            <h2> Filter: </h2>
        
            <div class="ingredient_list">

                <div class="checkbox">
                    <label><input type="checkbox" rel="rice" onchange="change();"/> Rice</label>
                </div>
                
                <div class="checkbox">
                    <label><input type="checkbox" rel="tomatoes" onchange="change();"/> Tomatoes</label>
                </div>
        
            </div>
            <br>
            <button class="button" onclick="showAllRecipe()">Show All Recipes!</button>


        </div>

       
    </div>

    <div class="body_container">

        <div class="text_container">
                
            <h2>Results</h2>
            
            <div class="result" id="recipeResult">
            <!-- Recipe titles will be dynamically generated here -->   

            </div>
        </div>       
    </div>
    
</body>

<script>


    // Function to filter recipes based on ingredient filters
    function filterRecipes(ingredients) {
      if (ingredients.length === 0) {
        return ; // Show no recipes unless ingredients are selected (first view)
      }
      
      // Filter the recipes based on selected ingredients
      return recipes.filter(recipe => {
        // Check if the recipe's ingredients include all selected ingredients
        return ingredients.every(ingredient => recipe.ingredients.includes(ingredient));
      });
    }
    
    
    function change(){
        // Declare variables
        var input = document.querySelectorAll('.ingredient_list input[type=checkbox]'); 
        const recipeResult = document.getElementById('recipeResult');
        recipeResult.innerHTML = '';
    
        //Selected ingredients are now stored in the selectedIngredients array
        var selectedIngredients = Array.from(input)
        .filter(checkbox => checkbox.checked)
        .map(checkbox => checkbox.getAttribute('rel'));
    
        var filteredRecipes = filterRecipes(selectedIngredients);
    
        //Filltered recipes are then iterated over to append to recipeResult container 
        
        if (filteredRecipes){
            filteredRecipes.forEach(recipe => {
                const recipeTitle = document.createElement('p');
                recipeTitle.textContent = recipe.title;
                recipeResult.appendChild(recipeTitle);
            });
        }
    
    
        
    }
    
    function showAllRecipe(ingredients){
        
        //Declare Variables
        const recipeResult = document.getElementById('recipeResult');
        recipeResult.innerHTML = '';
    
        recipes.forEach(recipe => {
        const recipeTitle = document.createElement('p');
        recipeTitle.textContent = recipe.title;
        recipeResult.appendChild(recipeTitle);

        });
    
    };
    
    
    </script>
    
</html>