<!DOCTYPE html>
<html lang="en">
<head>
    <title>What do I eat today?</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="recipes.js"></script>
    <!-- link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css"> -->
</head>
<body>

    <div class="ingredient_list">

        <div class="checkbox">
            <label><input type="checkbox" rel="rice" onchange="change();"/> Rice</label>
        </div>
        
        <div class="checkbox">
            <label><input type="checkbox" rel="tomatoes" onchange="change();"/> Tomatoes</label>
        </div>

    </div>
    
    <p></p>
    <button class="button" onclick="showAllRecipe()">Show All Recipes!</button>


    <div class="result" id="recipeResult">
        <!-- Recipe titles will be dynamically generated here -->
        <!-- test -->
    </div>

   
</body>

<script>


// Function to filter recipes based on ingredient filters
function filterRecipes(ingredients) {
  if (ingredients.length === 0) {
    return ; // Show no recipes unless ingredients are selected (first view)
  }
  
  // Filter the recipes based on selected ingredients
  return recipes.filter(recipe => {
    // Check if the recipe's ingredients include all selected ingredients
    return ingredients.every(ingredient => recipe.ingredients.includes(ingredient));
  });
}


function change(){
    // Declare variables
    var input = document.querySelectorAll('.ingredient_list input[type=checkbox]'); 
    const recipeResult = document.getElementById('recipeResult');
    recipeResult.innerHTML = '';

    //Selected ingredients are now stored in the selectedIngredients array
    var selectedIngredients = Array.from(input)
    .filter(checkbox => checkbox.checked)
    .map(checkbox => checkbox.getAttribute('rel'));

    var filteredRecipes = filterRecipes(selectedIngredients);

    //Filltered recipes are then iterated over to append to recipeResult container 
    
    if (filteredRecipes){
        filteredRecipes.forEach(recipe => {
            const recipeTitle = document.createElement('h1');
            recipeTitle.textContent = recipe.title;
            recipeResult.appendChild(recipeTitle);
        });
    }


    
}

function showAllRecipe(ingredients){
    
    //Declare Variables
    const recipeResult = document.getElementById('recipeResult');
    recipeResult.innerHTML = '';

    recipes.forEach(recipe => {
    const recipeTitle = document.createElement('h1');
    recipeTitle.textContent = recipe.title;
    recipeResult.appendChild(recipeTitle);
    });

};


</script>

</html>